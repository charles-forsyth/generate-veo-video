# Generate Veo Video CLI

[![CI](https://github.com/charles-forsyth/generate-veo-video/actions/workflows/ci.yml/badge.svg)](https://github.com/charles-forsyth/generate-veo-video/actions/workflows/ci.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python: 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![Ruff](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json)](https://github.com/astral-sh/ruff)

A powerful CLI tool for generating videos using Google's **Veo 3.1** model via the Vertex AI / Gemini API.

**Version:** 0.2.3

## Features

- **Text-to-Video**: Generate high-quality videos from text prompts.
- **Image-to-Video**: Animate static images.
- **Reference Images**: Use up to 3 reference images to guide style and character consistency.
- **First/Last Frame Control**: Interpolate between a starting and ending frame.
- **Video Extension**: Extend existing Veo-generated videos.
- **Environment Config**: Loads API keys and project settings from `.env` files (local or home directory).

## Installation

Install directly from GitHub using `uv`:

```bash
uv tool install git+https://github.com/charles-forsyth/generate-veo-video.git
```

To update to the latest version:
```bash
uv tool upgrade generate-veo-video
```

## Configuration

The tool expects the following environment variables. You can set them in a `.env` file in your home directory (`~/.env`) or the current working directory.

```bash
GOOGLE_CLOUD_PROJECT=your-project-id
GOOGLE_CLOUD_LOCATION=us-central1
GEMINI_API_KEY=AIza... # Optional, falls back to Vertex AI ADC if not present
```

## Usage Examples

Once installed, use the `generate-veo` command.

### 1. Text-to-Video
Generate videos purely from descriptive text prompts.

*   **Cinematic Scene:**
    ```bash
    generate-veo "A cinematic drone shot of a futuristic cyberpunk city at night, neon lights, rain, 8k resolution." --aspect-ratio 16:9
    ```
*   **Character Action:**
    ```bash
    generate-veo "A fluffy golden retriever puppy chasing a butterfly in a field of sunflowers, sunny day." --duration 4
    ```

### 2. Image-to-Video
Bring static images to life.

*   **Landscape Animation:**
    ```bash
    generate-veo "The waterfall flows smoothly and mist rises from the pool." --image ./waterfall.png
    ```
*   **Character Portrait:**
    ```bash
    generate-veo "The woman smiles gently and looks towards the camera, wind blowing her hair." --image ./portrait.jpg
    ```

### 3. Reference Images (Style Control)
Use up to 3 images to control the visual style or subject appearance.

*   **Fashion Consistency:**
    ```bash
    generate-veo "A model walking down a runway wearing the referenced dress." --ref-images ./dress.png ./shoes.png
    ```
*   **Art Style Transfer:**
    ```bash
    generate-veo "A busy street scene in the style of the reference image." --ref-images ./van_gogh_style.jpg
    ```

### 4. Morphing (First & Last Frame)
Generate a video that transitions smoothly between two specific images.

*   **Transformation:**
    ```bash
    generate-veo "A caterpillar transforming into a butterfly." --image ./caterpillar.png --last-frame ./butterfly.png
    ```
*   **Sketch to Realism:**
    ```bash
    generate-veo "A rough pencil sketch fading into a photorealistic render." --image ./sketch.jpg --last-frame ./render.jpg
    ```

### 5. Video Extension
Extend a video generated by Veo (must be a valid Veo output file).

*   **Continue Action:**
    ```bash
    generate-veo "The car continues driving down the highway into the sunset." --video ./car_clip.mp4
    ```
*   **Add Narrative:**
    ```bash
    generate-veo "The camera pans up to reveal a spaceship hovering above." --video ./city_intro.mp4
    ```

### Options Reference

| Flag | Description | Default |
|------|-------------|---------|
| `--output-file`, `-o` | Custom output filename | Auto-generated |
| `--duration` | Video duration in seconds (4, 6, 8) | 8 |
| `--aspect-ratio` | Video aspect ratio (16:9, 9:16) | 16:9 |
| `--negative-prompt` | Elements to avoid in the video | None |
| `--seed` | Random seed for improved determinism | None |
| `--history` | Show command history | - |
| `--rerun` | Rerun a command from history by ID | - |

## Development

To develop locally:

1. Clone the repo.
2. Run with `uv`:
   ```bash
   uv run generate_veo3_video.py "Prompt..."
   ```